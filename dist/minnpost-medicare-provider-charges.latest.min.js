/*! minnpost-medicare-provider-charges - v0.0.1 - 2013-05-09
* https://github.com/MinnPost/minnpost-crime
* Copyright (c) 2013 ; Licensed MIT */

var mpApp=mpApp||{};mpApp["minnpost-medicare-provider-charges"]=mpApp["minnpost-medicare-provider-charges"]||{},function(e,t){e.templates=e.templates||{},e.getTemplate=function(a,i,n){var r="js/templates/"+a+".html";n=n||e,_.isUndefined(e.templates[r])?t.ajax({url:r,method:"GET",async:!1,contentType:"text",success:function(t){e.templates[r]=_.template(t),i.apply(n,[e.templates[r]])}}):i.apply(n,[e.templates[r]])},e.data=e.data||{},e.getData=function(a,i,n){n=n||e,_.isUndefined(e.data[a])?t.getJSON("./data/"+a+".json",function(t){e.data[a]=t,i.apply(n,[t])}):i.apply(n,[e.data[a]])}}(mpApp["minnpost-medicare-provider-charges"],jQuery),function(e){e.ProviderModel=Backbone.Model.extend({}),e.ProvidersCollection=Backbone.Collection.extend({model:e.ProviderModel,comparator:"name"}),e.AppView=Backbone.View.extend({el:"#minnpost-medicare-provider-charges",initialize:function(){this.templates=this.templates||{}},render:function(){return e.getTemplate("template-container",function(){this.$el.html()},this),this},renderLoading:function(t){return e.getTemplate("template-loading",function(e){this.templates.loading=e,this.$el.html(this.templates.loading({message:t}))},this),this},renderError:function(t){return e.getTemplate("template-error",function(e){this.templates.error=e,this.$el.html(this.templates.error({error:t}))},this),this}}),e.Application=Backbone.Router.extend({routes:{map:"routeMap","*defaultR":"routeDefault"},defaultOptions:{imagePath:"./css/images/"},initialize:function(t){e.options=_.extend(this.defaultOptions,t),this.mainView=new e.AppView({el:t.el}),this.mainView.renderLoading()},processData:function(){this.start()},start:function(){Backbone.history.start()},routeDefault:function(){this.navigate("/map",{trigger:!0,replace:!0})},routeMap:function(){}})}(mpApp["minnpost-medicare-provider-charges"],jQuery);